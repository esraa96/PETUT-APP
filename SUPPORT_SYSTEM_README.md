# نظام الدعم الفني - Petut App

## نظرة عامة
تم إنشاء نظام دعم فني متكامل يربط بين التطبيق والويب، يسمح للمستخدمين بإرسال تذاكر الدعم والتواصل مع فريق خدمة العملاء.

## المكونات المضافة

### 1. صفحات المستخدمين
- **ContactUsPage** (`/contact-us`): صفحة إرسال تذاكر الدعم الفني
- **MyTicketsPage** (`/my-tickets`): صفحة عرض تذاكر المستخدم والمحادثات

### 2. صفحات الأدمن
- **SupportPage** (`/admin-dashboard/support`): لوحة تحكم الدعم الفني مع الإحصائيات
- **SupportTicketsTable**: جدول إدارة التذاكر مع فلترة حسب الحالة

### 3. مكونات الدردشة
- **SupportChatModal**: نافذة الدردشة للأدمن
- **UserSupportChatModal**: نافذة الدردشة للمستخدمين

### 4. النظام في Firebase
```javascript
// هيكل collection في Firestore
support_tickets: {
  userId: string,
  userEmail: string,
  userName: string,
  subject: string,
  message: string,
  priority: 'low' | 'medium' | 'high' | 'urgent',
  status: 'open' | 'in_progress' | 'resolved' | 'closed',
  createdAt: timestamp,
  updatedAt: timestamp,
  messages: [
    {
      senderId: string,
      senderName: string,
      message: string,
      timestamp: timestamp,
      isAdmin: boolean
    }
  ]
}
```

## الميزات

### للمستخدمين:
- ✅ إرسال تذاكر دعم فني جديدة
- ✅ تحديد أولوية المشكلة (منخفضة، متوسطة، عالية، عاجلة)
- ✅ عرض جميع التذاكر الخاصة بهم
- ✅ الدردشة المباشرة مع فريق الدعم
- ✅ تتبع حالة التذكرة (مفتوحة، قيد المعالجة، محلولة، مغلقة)

### للأدمن:
- ✅ عرض جميع تذاكر الدعم الفني
- ✅ إحصائيات شاملة (إجمالي التذاكر، المفتوحة، قيد المعالجة، المحلولة)
- ✅ فلترة التذاكر حسب الحالة
- ✅ تحديث حالة التذاكر
- ✅ الدردشة المباشرة مع المستخدمين
- ✅ عرض معلومات المستخدم وتاريخ الإنشاء

## كيفية الاستخدام

### للمستخدمين:
1. الذهاب إلى `/contact-us` لإرسال تذكرة جديدة
2. ملء النموذج (الموضوع، الأولوية، التفاصيل)
3. عرض التذاكر في `/my-tickets`
4. النقر على "عرض المحادثة" للتواصل مع الدعم

### للأدمن:
1. الذهاب إلى `/admin-dashboard/support`
2. عرض الإحصائيات والتذاكر
3. استخدام الفلتر لعرض تذاكر معينة
4. النقر على "محادثة" للرد على المستخدم
5. تحديث حالة التذكرة من القائمة المنسدلة

## الإشعارات
- تم إضافة نظام إشعارات للتذاكر الجديدة
- `useSupportNotifications` hook لمراقبة التحديثات
- `SupportNotificationBadge` لعرض عدد الإشعارات

## التحديثات المطلوبة

### في Sidebar الأدمن:
تم إضافة رابط "Support" في القائمة الجانبية

### في App.jsx:
تم إضافة الروابط الجديدة:
- `/admin-dashboard/support`
- `/contact-us`
- `/my-tickets`

### في HomePage:
تم تحديث الرابط ليوجه إلى صفحة الدعم الفني

## الأمان
- جميع الصفحات محمية بـ `ProtectedRoute`
- التحقق من صلاحيات المستخدم
- التحقق من ملكية التذاكر للمستخدمين

## التطوير المستقبلي
- إضافة إشعارات push للتذاكر الجديدة
- إضافة إمكانية رفع الملفات
- إضافة تقييم خدمة الدعم
- إضافة تصنيفات للمشاكل
- إضافة نظام تصعيد للمشاكل العاجلة