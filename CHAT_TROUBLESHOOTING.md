# حل مشاكل الشات - Chat Troubleshooting

## المشاكل التي تم إصلاحها:

### 1. قواعد Firestore
- تم إضافة قواعد للشات والرسائل في `firestore.rules`
- يجب نشر القواعد باستخدام: `firebase deploy --only firestore:rules`

### 2. بنية البيانات
- الرسائل تُحفظ في collection منفصل `/messages`
- الشات يُحفظ في collection `/chats`

### 3. الاستماع للرسائل
- تم إصلاح الاستماع للرسائل من المكان الصحيح
- إضافة معالجة للأخطاء

## خطوات التشغيل:

1. تأكد من تسجيل الدخول
2. انشر قواعد Firestore الجديدة:
   ```bash
   firebase deploy --only firestore:rules
   ```
3. أعد تشغيل التطبيق

## اختبار الشات:

1. سجل دخول بحسابين مختلفين
2. ابدأ محادثة من ملف المستخدم
3. أرسل رسالة واختبر الاستقبال

## إذا استمرت المشاكل:

1. تحقق من console للأخطاء
2. تأكد من صحة إعدادات Firebase
3. تحقق من أذونات Firestore